<?xml version="1.0" encoding="UTF-8"?>

<!--
  Copyright (c) 2016, 2019 IBM Corp. and others

  This program and the accompanying materials are made available under
  the terms of the Eclipse Public License 2.0 which accompanies this
  distribution and is available at https://www.eclipse.org/legal/epl-2.0/
  or the Apache License, Version 2.0 which accompanies this distribution and
  is available at https://www.apache.org/licenses/LICENSE-2.0.

  This Source Code may also be made available under the following
  Secondary Licenses when the conditions for such availability set
  forth in the Eclipse Public License, v. 2.0 are satisfied: GNU
  General Public License, version 2 with the GNU Classpath
  Exception [1] and GNU General Public License, version 2 with the
  OpenJDK Assembly Exception [2].

  [1] https://www.gnu.org/software/classpath/license.html
  [2] http://openjdk.java.net/legal/assembly-exception.html

  SPDX-License-Identifier: EPL-2.0 OR Apache-2.0 OR GPL-2.0 WITH Classpath-exception-2.0 OR LicenseRef-GPL-2.0 WITH Assembly-exception
-->

<playlist xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="../../TestConfig/playlist.xsd">
	<include>variables.mk</include>
	<test>
		<testCaseName>jsr292Test_jdk8</testCaseName>
		<variations>
			<variation>NoOptions</variation>
			<variation>Mode195</variation>
		</variations>
		<command>$(JAVA_COMMAND) $(JVM_OPTIONS) \
	-Djava.security.policy=$(Q)$(TEST_RESROOT)$(D)java.policy$(Q) \
	-cp $(Q)$(TEST_RESROOT)$(D)jsr292test.jar$(P)$(RESOURCES_DIR)$(P)$(TESTNG)$(P)$(LIB_DIR)$(D)asm-all.jar$(Q) \
	org.testng.TestNG -d $(REPORTDIR) $(Q)$(TEST_RESROOT)$(D)testng_8.xml$(Q) \
	-testnames jsr292Test,jsr292Test_optional \
	-groups $(TEST_GROUP) \
	-excludegroups $(DEFAULT_EXCLUDE); \
	$(TEST_STATUS)</command>
		<levels>
			<level>extended</level>
		</levels>
		<groups>
			<group>functional</group>
		</groups>
		<subsets>
			<subset>8</subset>
		</subsets>
	</test>

	<test>
		<testCaseName>jsr292Test_jdk9_jdk10</testCaseName>
		<variations>
			<variation>NoOptions</variation>
			<variation>Mode195</variation>
		</variations>
		<command>$(JAVA_COMMAND) $(JVM_OPTIONS) \
	--add-opens=java.base/java.lang=ALL-UNNAMED \
	-Djava.security.policy=$(Q)$(TEST_RESROOT)$(D)java.policy$(Q) \
	-cp $(Q)$(TEST_RESROOT)$(D)jsr292test.jar$(P)$(RESOURCES_DIR)$(P)$(TESTNG)$(P)$(LIB_DIR)$(D)asm-all.jar$(Q) \
	org.testng.TestNG -d $(REPORTDIR) $(Q)$(TEST_RESROOT)$(D)testng.xml$(Q) \
	-testnames jsr292Test,jsr292Test_B95up,jsr292Test_optional \
	-groups $(TEST_GROUP) \
	-excludegroups $(DEFAULT_EXCLUDE); \
	$(TEST_STATUS)</command>
		<levels>
			<level>extended</level>
		</levels>
		<groups>
			<group>functional</group>
		</groups>
		<subsets>
			<subset>9</subset>
			<subset>10</subset>
		</subsets>
	</test>

    <test>
		<testCaseName>jsr292Test</testCaseName>
		<variations>
				<variation>NoOptions</variation>
				<variation>Mode195</variation>
		</variations>
		<command>$(JAVA_COMMAND) $(JVM_OPTIONS) \
	--add-opens=java.base/java.lang=ALL-UNNAMED \
	-Djava.security.policy=$(Q)$(TEST_RESROOT)$(D)java.policy$(Q) \
	-cp $(Q)$(TEST_RESROOT)$(D)jsr292test.jar$(P)$(RESOURCES_DIR)$(P)$(TESTNG)$(P)$(LIB_DIR)$(D)asm-all.jar$(Q) \
	org.testng.TestNG -d $(REPORTDIR) $(Q)$(TEST_RESROOT)$(D)testng.xml$(Q) \
	-testnames jsr292Test,jsr292Test_B95up,jsr292Test_Java11up,jsr292Test_optional \
	-groups $(TEST_GROUP) \
	-excludegroups $(DEFAULT_EXCLUDE); \
	$(TEST_STATUS)</command>
		<levels>
			<level>extended</level>
		</levels>
		<groups>
			<group>functional</group>
		</groups>
		<subsets>
			<subset>11+</subset>
		</subsets>
	</test>

	<test>
		<testCaseName>jsr292Test_jdk12</testCaseName>
		<variations>
				<variation>NoOptions</variation>
				<variation>Mode195</variation>
		</variations>
		<command>$(JAVA_COMMAND) $(JVM_OPTIONS) \
	--add-opens=java.base/java.lang=ALL-UNNAMED \
	-Djava.security.policy=$(Q)$(TEST_RESROOT)$(D)java.policy$(Q) \
	-cp $(Q)$(TEST_RESROOT)$(D)jsr292test.jar$(P)$(RESOURCES_DIR)$(P)$(TESTNG)$(P)$(LIB_DIR)$(D)asm-all.jar$(Q) \
	org.testng.TestNG -d $(REPORTDIR) $(Q)$(TEST_RESROOT)$(D)testng.xml$(Q) \
	-testnames jsr292Test_Java12up \
	-groups $(TEST_GROUP) \
	-excludegroups $(DEFAULT_EXCLUDE); \
	$(TEST_STATUS)</command>
		<levels>
			<level>extended</level>
		</levels>
		<groups>
			<group>functional</group>
		</groups>
		<subsets>
			<subset>12+</subset>
		</subsets>
		<impls>
			<impl>openj9</impl>
			<impl>ibm</impl>
		</impls>
	</test>

	<test>
		<testCaseName>jsr292Test_JitCount0_jdk8</testCaseName>
		<variations>
			<variation>-Xjit:count=0</variation>
		</variations>
		<command>$(JAVA_COMMAND) $(JVM_OPTIONS) \
	-Djava.security.policy=$(Q)$(TEST_RESROOT)$(D)java.policy$(Q) \
	-cp $(Q)$(TEST_RESROOT)$(D)jsr292test.jar$(P)$(RESOURCES_DIR)$(P)$(TESTNG)$(P)$(LIB_DIR)$(D)asm-all.jar$(Q) \
	org.testng.TestNG -d $(REPORTDIR) $(Q)$(TEST_RESROOT)$(D)testng_8.xml$(Q) \
	-testnames jsr292Test \
	-groups $(TEST_GROUP) \
	-excludegroups $(DEFAULT_EXCLUDE); \
	$(TEST_STATUS)</command>
		<platformRequirements>^arch.arm</platformRequirements>
		<levels>
			<level>extended</level>
		</levels>
		<groups>
			<group>functional</group>
		</groups>
		<subsets>
			<subset>8</subset>
		</subsets>
	</test>

	<test>
		<testCaseName>jsr292Test_JitCount0</testCaseName>
		<variations>
			<variation>-Xjit:count=0</variation>
		</variations>
		<command>$(JAVA_COMMAND) $(JVM_OPTIONS) \
	--add-opens=java.base/java.lang=ALL-UNNAMED \
	-Djava.security.policy=$(Q)$(TEST_RESROOT)$(D)java.policy$(Q) \
	-cp $(Q)$(TEST_RESROOT)$(D)jsr292test.jar$(P)$(RESOURCES_DIR)$(P)$(TESTNG)$(P)$(LIB_DIR)$(D)asm-all.jar$(Q) \
	org.testng.TestNG -d $(REPORTDIR) $(Q)$(TEST_RESROOT)$(D)testng.xml$(Q) \
	-testnames jsr292Test,jsr292Test_B95up \
	-groups $(TEST_GROUP) \
	-excludegroups $(DEFAULT_EXCLUDE); \
	$(TEST_STATUS)</command>
		<platformRequirements>^arch.arm</platformRequirements>
		<levels>
			<level>extended</level>
		</levels>
		<groups>
			<group>functional</group>
		</groups>
		<subsets>
			<subset>9+</subset>
		</subsets>
	</test>

	<test>
		<testCaseName>jsr292BootstrapTest_jdk8</testCaseName>
		<variations>
			<variation>NoOptions</variation>
			<variation>Mode195</variation>
		</variations>
		<command>$(JAVA_COMMAND) $(JVM_OPTIONS) \
	-Xbootclasspath/a:$(Q)$(TEST_RESROOT)$(D)jsr292bootstrap.jar$(Q) \
	-cp $(Q)$(TEST_RESROOT)$(D)jsr292test.jar$(P)$(RESOURCES_DIR)$(P)$(TESTNG)$(Q) \
	org.testng.TestNG -d $(REPORTDIR) $(Q)$(TEST_RESROOT)$(D)testng_8.xml$(Q) \
	-testnames jsr292BootstrapTest \
	-groups $(TEST_GROUP) \
	-excludegroups $(DEFAULT_EXCLUDE); \
	$(TEST_STATUS)</command>
		<levels>
			<level>extended</level>
		</levels>
		<groups>
			<group>functional</group>
		</groups>
		<subsets>
			<subset>8</subset>
		</subsets>
	</test>

	<test>
		<testCaseName>jsr292BootstrapTest</testCaseName>
		<variations>
			<variation>NoOptions</variation>
			<variation>Mode195</variation>
		</variations>
		<command>$(JAVA_COMMAND) $(JVM_OPTIONS) \
	--add-opens=java.base/java.lang=ALL-UNNAMED --add-exports java.base/jdk.internal.reflect=ALL-UNNAMED \
	-Xbootclasspath/a:$(Q)$(TEST_RESROOT)$(D)jsr292bootstrap.jar$(Q) \
	-cp $(Q)$(TEST_RESROOT)$(D)jsr292test.jar$(P)$(RESOURCES_DIR)$(P)$(TESTNG)$(Q) \
	org.testng.TestNG -d $(REPORTDIR) $(Q)$(TEST_RESROOT)$(D)testng.xml$(Q) \
	-testnames jsr292BootstrapTest \
	-groups $(TEST_GROUP) \
	-excludegroups $(DEFAULT_EXCLUDE); \
	$(TEST_STATUS)</command>
		<levels>
			<level>extended</level>
		</levels>
		<groups>
			<group>functional</group>
		</groups>
		<subsets>
			<subset>9+</subset>
		</subsets>
	</test>

	<test>
		<testCaseName>jsr292_MethodHandleAPI_Test</testCaseName>
		<command>$(JAVA_COMMAND) $(JVM_OPTIONS) \
	--add-opens=java.base/java.lang.invoke=ALL-UNNAMED --add-opens=java.base/java.lang=ALL-UNNAMED \
	-Djava.security.policy=$(Q)$(TEST_RESROOT)$(D)java.policy$(Q) \
	-cp $(Q)$(TEST_RESROOT)$(D)jsr292test.jar$(P)$(RESOURCES_DIR)$(P)$(TESTNG)$(P)$(LIB_DIR)$(D)asm-all.jar$(Q) \
	org.testng.TestNG -d $(REPORTDIR) $(Q)$(TEST_RESROOT)$(D)testng.xml$(Q) \
	-testnames jsr292_MethodHandleAPI_Test \
	-groups $(TEST_GROUP) \
	-excludegroups $(DEFAULT_EXCLUDE); \
	$(TEST_STATUS)</command>
		<levels>
			<level>extended</level>
		</levels>
		<groups>
			<group>functional</group>
		</groups>
		<subsets>
			<subset>9+</subset>
		</subsets>
	</test>

	<test>
		<testCaseName>jsr292_MethodHandleAPI_Test_JitCount1</testCaseName>
		<command>$(JAVA_COMMAND) $(JVM_OPTIONS) \
	--add-opens=java.base/java.lang.invoke=ALL-UNNAMED --add-opens=java.base/java.lang=ALL-UNNAMED \
	-Xjit:count=1,disableAsyncCompilation,verbose,vlog=$(Q)$(TEST_RESROOT)$(D)jitv.log$(Q) \
	-Djava.security.policy=$(Q)$(TEST_RESROOT)$(D)java.policy$(Q) \
	-cp $(Q)$(TEST_RESROOT)$(D)jsr292test.jar$(P)$(RESOURCES_DIR)$(P)$(TESTNG)$(P)$(LIB_DIR)$(D)asm-all.jar$(Q) \
	org.testng.TestNG -d $(REPORTDIR) $(Q)$(TEST_RESROOT)$(D)testng.xml$(Q) \
	-testnames jsr292_MethodHandleAPI_Test \
	-groups $(TEST_GROUP) \
	-excludegroups $(DEFAULT_EXCLUDE); \
	$(TEST_STATUS)</command>
		<levels>
			<level>extended</level>
		</levels>
		<groups>
			<group>functional</group>
		</groups>
		<subsets>
			<subset>9+</subset>
		</subsets>
	</test>

	<test>
		<testCaseName>jsr292_InDynTest</testCaseName>
		<variations>
			<variation>NoOptions</variation>
			<variation>Mode195</variation>
		</variations>
		<command>$(JAVA_COMMAND) $(JVM_OPTIONS) \
	-cp $(Q)$(TEST_RESROOT)$(D)jsr292test.jar$(P)$(RESOURCES_DIR)$(P)$(TESTNG)$(P)$(LIB_DIR)$(D)asm-all.jar$(Q) \
	org.testng.TestNG -d $(REPORTDIR) $(Q)$(TEST_RESROOT)$(D)testng$(XMLSUFFIX).xml$(Q) \
	-testnames jsr292_InDynTest \
	-groups $(TEST_GROUP) \
	-excludegroups $(DEFAULT_EXCLUDE); \
	$(TEST_STATUS)</command>
		<levels>
			<level>extended</level>
		</levels>
		<groups>
			<group>functional</group>
		</groups>
	</test>

</playlist>
