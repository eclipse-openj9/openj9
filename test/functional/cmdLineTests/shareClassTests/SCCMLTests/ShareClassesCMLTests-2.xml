<?xml version="1.0" encoding="UTF-8" standalone="no"?>

<!--
  Copyright (c) 2012, 2019 IBM Corp. and others

  This program and the accompanying materials are made available under
  the terms of the Eclipse Public License 2.0 which accompanies this
  distribution and is available at https://www.eclipse.org/legal/epl-2.0/
  or the Apache License, Version 2.0 which accompanies this distribution and
  is available at https://www.apache.org/licenses/LICENSE-2.0.

  This Source Code may also be made available under the following
  Secondary Licenses when the conditions for such availability set
  forth in the Eclipse Public License, v. 2.0 are satisfied: GNU
  General Public License, version 2 with the GNU Classpath
  Exception [1] and GNU General Public License, version 2 with the
  OpenJDK Assembly Exception [2].

  [1] https://www.gnu.org/software/classpath/license.html
  [2] http://openjdk.java.net/legal/assembly-exception.html

  SPDX-License-Identifier: EPL-2.0 OR Apache-2.0 OR GPL-2.0 WITH Classpath-exception-2.0 OR LicenseRef-GPL-2.0 WITH Assembly-exception
-->

<!DOCTYPE suite SYSTEM "cmdlinetester.dtd">

<!--  Test 59 to Test 119: 68 tests -->

<suite id="Shared Classes CommandLineOptionTests Suite ">

	<!-- Our test modes for this suite -->
	<variable name="mode204" value="-Xshareclasses:name=ShareClassesCMLTests"/>

	<!-- Set variables up -->
	<variable name="UTILITIES_PROGRAM" value="com.ibm.j9.sharedCacheAPI.tests.SharedUtilsTest"/>
	<variable name="UTILITIES_CP" value="-cp $JVM_TEST_ROOT$$PATHSEP$functional$PATHSEP$VM_Test$PATHSEP$VM_Test.jar"/>
	<variable name="UTILITIES_CACHE" value="-Xshareclasses:name=ShareClassesUtilities"/>	
	<variable name="JAVAC_DIR" value="$JAVA_HOME$$PATHSEP$bin"/>
	<variable name="CACHE_DIR" value="cacheDir=."/>
	
	<variable name="currentMode" value="$mode204$"/>
	<variable name="XXShareClassesEnableBCI" value="-XX:ShareClassesEnableBCI"/>
	
	<variable name="CP_HANOI" value="-cp $UTILSJAR$" />
 	<variable name="BOOTCP_HANOI" value="-Xbootclasspath/a:$UTILSJAR$" />
 	<variable name="PROGRAM_HANOI" value="org.openj9.test.ivj.Hanoi 2" />
 	<variable name="BOOTSTRAP_CLASS" value="java/lang/Object" />
 	
 	<variable name="AGENT_NOCLASSMODIFICATION" value="-agentlib:jvmtitest=test:ecflh001,args:noModify" />
 	<variable name="AGENT_RETRANSFORM" value="-agentlib:jvmtitest=test:rtc001" />
 	
	<variable name="DUMPFILE" value="shrcmltest" />
	<variable name="SYSDUMP" value="-Xdump:system:file=$DUMPFILE$.dmp" />
	<variable name="JAVADUMP" value="-Xdump:java:file=$DUMPFILE$.txt" />
	<variable name="SNAPDUMP" value="-Xdump:snap:file=$DUMPFILE$.trc" />
	<!-- Override -Xdump option on z/OS -->
	<variable name="SYSDUMP" value="-Xdump:system:opts=IEATDUMP,dsn=%uid.J9CORE.DMP" platforms="zos.*" />

	<if testVariable="SCMODE" testValue="204" resultVariable="currentMode" resultValue="$mode204$"/>
	
	<echo value=" "/>
	<echo value="#######################################################"/>
	<echo value="Running tests in mode $SCMODE$ with command line options: $currentMode$"/>
	<echo value="#######################################################"/>
	<echo value=" "/>
		
	<!--
	Note:
	Most tests check for strings 'corrupt', 'JVM requested Java dump', and 'JVM requested Snap dump' in the output.
	These checks are present because a cache may be found to be corrupt, and the test could otherwise pass.
	
	The string 'corrupt' is checked because it can appear several messages like below.
		JVMSHRC443E Cache CRC is incorrect indicating a corrupt cache. Incorrect cache CRC: 0x0.
		JVMDUMP013I Processed dump event "corruptcache", detail "".
		JVMSHRC442E Shared cache "jim" is corrupt. Corruption code is -1. Corrupt value is 0x0. No new JVMs will be allowed to connect to the cache.
	-->
		
	<test id="Start : Cleanup: persistent" timeout="600" runPath=".">
		<command>$JAVA_EXE$ $currentMode$,destroy</command>
		<output type="success" caseSensitive="yes" regex="no">Cache does not exist</output>
		<output type="success" caseSensitive="yes" regex="no">has been destroyed</output>
		<output type="success" caseSensitive="yes" regex="no">is destroyed</output>
		<output type="failure" caseSensitive="no" regex="no">Unhandled Exception</output>
		<output type="failure" caseSensitive="yes" regex="no">Exception:</output>
		<output type="failure" caseSensitive="no" regex="no">corrupt</output>
		<output type="failure" caseSensitive="yes" regex="no">Processing dump event</output>
	</test>


	<test id="Start: Cleanup: nonpersistent" timeout="600" runPath=".">
		<command>$JAVA_EXE$ $currentMode$,nonpersistent,destroy</command>
		<output type="success" caseSensitive="yes" regex="no">has been destroyed</output>
		<output type="success" caseSensitive="yes" regex="no">is destroyed</output>
		<output type="success" caseSensitive="yes" regex="no">Cache does not exist</output>
		<output type="failure" caseSensitive="no"  regex="no">Unhandled Exception</output>
		<output type="failure" caseSensitive="yes" regex="no">Exception:</output>
		<output type="failure" caseSensitive="no" regex="no">corrupt</output>
		<output type="failure" caseSensitive="yes" regex="no">Processing dump event</output>
	</test>

	<test id="Test 59: -Xnolinenumbers : create cache with -Xnolinenumbers" timeout="600" runPath=".">
		<command>$JAVA_EXE$ $currentMode$ -Xnolinenumbers -version</command>
		<output type="success" caseSensitive="yes" regex="yes" javaUtilPattern="yes">(java|openjdk) version</output>
		<output type="failure" caseSensitive="no" regex="no">Unhandled Exception</output>
		<output type="failure" caseSensitive="yes" regex="no">Exception:</output>
		<output type="failure" caseSensitive="no" regex="no">corrupt</output>
		<output type="failure" caseSensitive="yes" regex="no">Processing dump event</output>
	</test>	
	
	<test id="Test 60: -Xnolinenumbers : ensure debug area is zero bytes when -Xnolinenumbers is used" timeout="600" runPath=".">
		<command>$JAVA_EXE$ $currentMode$,printStats,printDetails -version</command>
		<output type="sucess" caseSensitive="yes" regex="yes" javaUtilPattern="yes" showMatch="yes">Class debug area size[\s]*= 0</output>
		<output type="required" caseSensitive="yes" regex="yes" javaUtilPattern="yes" showMatch="yes">Class LocalVariableTable bytes[\s]*= 0</output>
		<output type="required" caseSensitive="yes" regex="yes" javaUtilPattern="yes" showMatch="yes">Class LineNumberTable bytes[\s]*= 0</output>
		<output type="required" caseSensitive="yes" regex="yes" javaUtilPattern="yes" showMatch="yes">Class debug area % used[\s]*= 100%</output>
		<output type="failure" caseSensitive="no" regex="no">corrupt</output>
		<output type="failure" caseSensitive="yes" regex="no">Processing dump event</output>
	</test>
	
	<test id="Test 61: -Xnolinenumbers : cleanup" timeout="600" runPath=".">
		<command>$JAVA_EXE$ $currentMode$,destroy</command>
		<output type="success" caseSensitive="yes" regex="no">has been destroyed</output>
		<output type="success" caseSensitive="yes" regex="no">is destroyed</output>
		<output type="failure" caseSensitive="yes" regex="no">Cache does not exist</output>
		<output type="failure" caseSensitive="no"  regex="no">Unhandled Exception</output>
		<output type="failure" caseSensitive="yes" regex="no">Exception:</output>
		<output type="failure" caseSensitive="no" regex="no">corrupt</output>
		<output type="failure" caseSensitive="yes" regex="no">Processing dump event</output>
	</test>	
	
	<test id="Test 62: -Xnolinenumbers & -Xjit:verbose : create cache with -Xnolinenumbers -Xjit:verbose" timeout="600" runPath=".">
		<command>$JAVA_EXE$ $currentMode$ -Xnolinenumbers -Xjit:verbose -version</command>
		<output type="success" caseSensitive="yes" regex="yes" javaUtilPattern="yes">(java|openjdk) version</output>
		<output type="failure" caseSensitive="no" regex="no">Unhandled Exception</output>
		<output type="failure" caseSensitive="yes" regex="no">Exception:</output>
		<output type="failure" caseSensitive="no" regex="no">corrupt</output>
		<output type="failure" caseSensitive="yes" regex="no">Processing dump event</output>
	</test>	
	
	<test id="Test 63: -Xnolinenumbers & -Xjit:verbose : ensure debug area is zero bytes when -Xnolinenumbers & -Xjit:verbose are used" timeout="600" runPath=".">
		<command>$JAVA_EXE$ $currentMode$,printStats,printDetails -version</command>
		<output type="sucess" caseSensitive="yes" regex="yes" javaUtilPattern="yes" showMatch="yes">Class debug area size[\s]*= 0</output>
		<output type="required" caseSensitive="yes" regex="yes" javaUtilPattern="yes" showMatch="yes">Class LocalVariableTable bytes[\s]*= 0</output>
		<output type="required" caseSensitive="yes" regex="yes" javaUtilPattern="yes" showMatch="yes">Class LineNumberTable bytes[\s]*= 0</output>
		<output type="required" caseSensitive="yes" regex="yes" javaUtilPattern="yes" showMatch="yes">Class debug area % used[\s]*= 100%</output>
		<output type="failure" caseSensitive="no" regex="no">corrupt</output>
		<output type="failure" caseSensitive="yes" regex="no">Processing dump event</output>
	</test>
					
	<test id="Test 64: -Xnolinenumbers & -Xjit:verbose : cleanup" timeout="600" runPath=".">
		<command>$JAVA_EXE$ $currentMode$,destroy</command>
		<output type="success" caseSensitive="yes" regex="no">has been destroyed</output>
		<output type="success" caseSensitive="yes" regex="no">is destroyed</output>
		<output type="failure" caseSensitive="yes" regex="no">Cache does not exist</output>
		<output type="failure" caseSensitive="no"  regex="no">Unhandled Exception</output>
		<output type="failure" caseSensitive="yes" regex="no">Exception:</output>
		<output type="failure" caseSensitive="no" regex="no">corrupt</output>
		<output type="failure" caseSensitive="yes" regex="no">Processing dump event</output>
	</test>	
	
	<test id="Test 65: -Xshareclasses:mprotect code coverage : create a cache with defaults for the following tests" timeout="600" runPath=".">
		<command>$JAVA_EXE$ $currentMode$ -version</command>
		<output type="success" caseSensitive="yes" regex="yes" javaUtilPattern="yes">(java|openjdk) version</output>
		<output type="failure" caseSensitive="no" regex="no">Unhandled Exception</output>
		<output type="failure" caseSensitive="yes" regex="no">Exception:</output>
		<output type="failure" caseSensitive="no" regex="no">corrupt</output>
		<output type="failure" caseSensitive="yes" regex="no">Processing dump event</output>
	</test>	
	
	<test id="Test 66: -Xshareclasses:mprotect code coverage : mprotect=default" timeout="600" runPath=".">
		<command>$JAVA_EXE$ $currentMode$,mprotect=default -version</command>
		<output type="success" caseSensitive="yes" regex="yes" javaUtilPattern="yes">(java|openjdk) version</output>
		<output type="failure" caseSensitive="no" regex="no">Unhandled Exception</output>
		<output type="failure" caseSensitive="yes" regex="no">Exception:</output>
		<output type="failure" caseSensitive="no" regex="no">corrupt</output>
		<output type="failure" caseSensitive="yes" regex="no">Processing dump event</output>
	</test>	
	
	<test id="Test 67: -Xshareclasses:mprotect code coverage : mprotect=none" timeout="600" runPath=".">
		<command>$JAVA_EXE$ $currentMode$,reset,mprotect=none -version</command>
		<output type="success" caseSensitive="yes" regex="yes" javaUtilPattern="yes">(java|openjdk) version</output>
		<output type="failure" caseSensitive="no" regex="no">Unhandled Exception</output>
		<output type="failure" caseSensitive="yes" regex="no">Exception:</output>
		<output type="failure" caseSensitive="no" regex="no">corrupt</output>
		<output type="failure" caseSensitive="yes" regex="no">Processing dump event</output>
	</test>	
	
	<test id="Test 68: -Xshareclasses:mprotect code coverage : mprotect=all" timeout="600" runPath=".">
		<command>$JAVA_EXE$ $currentMode$,mprotect=all -version</command>
		<output type="success" caseSensitive="yes" regex="yes" javaUtilPattern="yes">(java|openjdk) version</output>
		<output type="failure" caseSensitive="no" regex="no">Unhandled Exception</output>
		<output type="failure" caseSensitive="yes" regex="no">Exception:</output>
		<output type="failure" caseSensitive="no" regex="no">corrupt</output>
		<output type="failure" caseSensitive="yes" regex="no">Processing dump event</output>
	</test>	

	<test id="Test 69: -Xshareclasses:mprotect code coverage : mprotect=norw" timeout="600" runPath=".">
		<command>$JAVA_EXE$ $currentMode$,mprotect=norw -version</command>
		<output type="success" caseSensitive="yes" regex="yes" javaUtilPattern="yes">(java|openjdk) version</output>
		<output type="failure" caseSensitive="no" regex="no">Unhandled Exception</output>
		<output type="failure" caseSensitive="yes" regex="no">Exception:</output>
		<output type="failure" caseSensitive="no" regex="no">corrupt</output>
		<output type="failure" caseSensitive="yes" regex="no">Processing dump event</output>
	</test>	
	
	<test id="Test 70: -Xshareclasses:mprotect code coverage : mprotect=junk" timeout="600" runPath=".">
		<command>$JAVA_EXE$ $currentMode$,mprotect=junk -version</command>
		<output type="success" caseSensitive="yes" regex="no">Unrecognised sub-option for option mprotect=</output>
		<output type="failure" caseSensitive="no" regex="no">corrupt</output>
		<output type="failure" caseSensitive="yes" regex="no">Processing dump event</output>
	</test>	
	
	<test id="Test 71: -Xshareclasses:mprotect code coverage : : cleanup" timeout="600" runPath=".">
		<command>$JAVA_EXE$ $currentMode$,destroy</command>
		<output type="success" caseSensitive="yes" regex="no">has been destroyed</output>
		<output type="success" caseSensitive="yes" regex="no">is destroyed</output>
		<output type="failure" caseSensitive="yes" regex="no">Cache does not exist</output>
		<output type="failure" caseSensitive="no"  regex="no">Unhandled Exception</output>
		<output type="failure" caseSensitive="yes" regex="no">Exception:</output>
		<output type="failure" caseSensitive="no" regex="no">corrupt</output>
		<output type="failure" caseSensitive="yes" regex="no">Processing dump event</output>
	</test>	
		
	<test id="Test 72: -Xshareclasses:help code coverage : help" timeout="600" runPath=".">
		<command>$JAVA_EXE$ -Xshareclasses:help</command>
		<output type="success" caseSensitive="yes" regex="no">Valid options included (with a brief summary) are</output>
		<output type="failure" caseSensitive="no" regex="no">corrupt</output>
		<output type="failure" caseSensitive="yes" regex="no">Processing dump event</output>
	</test>
	
	<test id="Test 73: -Xshareclasses:morehelp code coverage : morehelp" timeout="600" runPath=".">
		<command>$JAVA_EXE$ -Xshareclasses:morehelp</command>
		<output type="success" caseSensitive="yes" regex="no">Valid options included (with a brief summary) are</output>
		<output type="failure" caseSensitive="yes" regex="no">Processing dump event</output>
	</test>
	
	<test id="Test 74: -Xshareclasses code coverage : cache sizes : -Xscmaxaot70m" timeout="600" runPath=".">
		<command>$JAVA_EXE$ -Xscmaxaot70m $currentMode$ -version</command>
		<output type="success" caseSensitive="yes" regex="yes" javaUtilPattern="yes">The maximum allowed AOT space should not be greater than the softmx limit|-Xscmaxaot value is greater than the shared cache size, so it has been set to unlimited</output>
		<output type="failure" caseSensitive="no" regex="no">corrupt</output>
		<output type="failure" caseSensitive="yes" regex="no">Processing dump event</output>
	</test>
		
	<test id="Test 75: -Xshareclasses code coverage : cache sizes : -Xscminaot8m -Xscmaxaot2m" timeout="600" runPath=".">
		<command>$JAVA_EXE$ -Xscminaot8m -Xscmaxaot2m $currentMode$ -version</command>
		<output type="success" caseSensitive="yes" regex="no">-Xscminaot value should not be greater than -Xscmaxaot value</output>
		<output type="failure" caseSensitive="no" regex="no">corrupt</output>
		<output type="failure" caseSensitive="yes" regex="no">Processing dump event</output>
	</test>
			
	<test id="Test 76: -Xshareclasses code coverage : Invalid -Xitsn value" timeout="600" runPath=".">
		<command>$JAVA_EXE$ -Xitsn1000000 $currentMode$ -version</command>
		<output type="success" caseSensitive="yes" regex="no">-Xitsn option is outside of the range of prime number values supported by the VM</output>
		<output type="failure" caseSensitive="no" regex="no">corrupt</output>
		<output type="failure" caseSensitive="yes" regex="no">Processing dump event</output>
	</test>
	
	<test id="Test 78: -Xshareclasses code coverage : cleanup" timeout="600" runPath=".">
		<command>$JAVA_EXE$ $currentMode$,destroy</command>
		<output type="success" caseSensitive="yes" regex="no">has been destroyed</output>
		<output type="success" caseSensitive="yes" regex="no">is destroyed</output>
		<output type="failure" caseSensitive="yes" regex="no">Cache does not exist</output>
		<output type="failure" caseSensitive="no"  regex="no">Unhandled Exception</output>
		<output type="failure" caseSensitive="yes" regex="no">Exception:</output>
		<output type="failure" caseSensitive="no" regex="no">corrupt</output>
		<output type="failure" caseSensitive="yes" regex="no">Processing dump event</output>
	</test>
		
	<test id="Test 79: CMVC 168586 : Create a persistent cache" timeout="600" runPath=".">
		<command>$JAVA_EXE$ -Xscmx32m $currentMode$ -version</command>
		<output type="success" caseSensitive="yes" regex="yes" javaUtilPattern="yes">(java|openjdk) version</output>
		<output type="failure" caseSensitive="no" regex="no">Unhandled Exception</output>
		<output type="failure" caseSensitive="yes" regex="no">Exception:</output>
		<output type="failure" caseSensitive="no" regex="no">corrupt</output>
		<output type="failure" caseSensitive="yes" regex="no">Processing dump event</output>
	</test>
	
	<test id="Test 80: CMVC 168586 : Ensure cache size is 32 MB" timeout="600" runPath=".">
		<command>$JAVA_EXE$ $currentMode$,printStats -version</command>
		<output type="success" caseSensitive="yes" regex="yes" javaUtilPattern="yes" showMatch="yes">cache size[\s]*= 335[\d][\d][\d][\d][\d][\D]</output>
		<output type="failure" caseSensitive="no" regex="no">Unhandled Exception</output>
		<output type="failure" caseSensitive="yes" regex="no">Exception:</output>
		<output type="failure" caseSensitive="no" regex="no">corrupt</output>
		<output type="failure" caseSensitive="yes" regex="no">Processing dump event</output>
	</test>
	
	<test id="Test 81: CMVC 168586 : Re-create by failing buildid match" timeout="600" runPath=".">
		<command>$JAVA_EXE$ $currentMode$,testBadBuildId -version</command>
		<output type="success" caseSensitive="yes" regex="yes" javaUtilPattern="yes">(java|openjdk) version</output>
		<output type="failure" caseSensitive="no" regex="no">Unhandled Exception</output>
		<output type="failure" caseSensitive="yes" regex="no">Exception:</output>
		<output type="failure" caseSensitive="no" regex="no">corrupt</output>
		<output type="failure" caseSensitive="yes" regex="no">Processing dump event</output>
	</test>
	
	<test id="Test 82: CMVC 168586 : Ensure cache size is still 32 MB" timeout="600" runPath=".">
		<command>$JAVA_EXE$ $currentMode$,printStats -version</command>
		<output type="success" caseSensitive="yes" regex="yes" javaUtilPattern="yes" showMatch="yes">cache size[\s]*= 335[\d][\d][\d][\d][\d][\D]</output>
		<output type="failure" caseSensitive="no" regex="no">Unhandled Exception</output>
		<output type="failure" caseSensitive="yes" regex="no">Exception:</output>
		<output type="failure" caseSensitive="no" regex="no">corrupt</output>
		<output type="failure" caseSensitive="yes" regex="no">Processing dump event</output>
	</test>
		
	<test id="Test 83: CMVC 168586 : Cleanup" timeout="600" runPath=".">
		<command>$JAVA_EXE$ $currentMode$,destroy</command>
		<output type="success" caseSensitive="yes" regex="no">has been destroyed</output>
		<output type="success" caseSensitive="yes" regex="no">is destroyed</output>

		<output type="failure" caseSensitive="yes" regex="no">Cache does not exist</output>
		<output type="failure" caseSensitive="no"  regex="no">Unhandled Exception</output>
		<output type="failure" caseSensitive="yes" regex="no">Exception:</output>
		<output type="failure" caseSensitive="no" regex="no">corrupt</output>
		<output type="failure" caseSensitive="yes" regex="no">Processing dump event</output>
	</test>	
		
	<test id="Test 84: utilities test: destroy existing cache if any" timeout="600" runPath=".">
		<command>$JAVA_EXE$ $currentMode$,destroy</command>
		<output type="success" caseSensitive="yes" regex="no">Cache does not exist</output>
		<output type="success" caseSensitive="yes" regex="no">has been destroyed</output>
		<output type="success" caseSensitive="yes" regex="no">is destroyed</output>
		<output type="failure" caseSensitive="no" regex="no">Unhandled Exception</output>
		<output type="failure" caseSensitive="yes" regex="no">Exception:</output>
		<output type="failure" caseSensitive="no" regex="no">corrupt</output>
		<output type="failure" caseSensitive="yes" regex="no">Processing dump event</output>
	</test>	

	<test id="Test 85: utilities test: create cache to be used below" timeout="600" runPath=".">
		<command>$JAVA_EXE$ $UTILITIES_CACHE$,reset -version</command>
		<output type="success" caseSensitive="yes" regex="yes" javaUtilPattern="yes">(java|openjdk) version</output>
		<output type="failure" caseSensitive="no" regex="no">Unhandled Exception</output>
		<output type="failure" caseSensitive="yes" regex="no">Exception:</output> 
		<output type="failure" caseSensitive="no" regex="no">corrupt</output>
		<output type="failure" caseSensitive="yes" regex="no">Processing dump event</output>
	</test>	

	<test id="Test 86: utilities test: iterate and destroy cache" timeout="600" runPath=".">
		<command>$JAVA_EXE$ $UTILITIES_CP$ $currentMode$,utilities $UTILITIES_PROGRAM$</command>
		<output type="success" caseSensitive="yes" regex="no">iterateSharedCache passed</output>
		<output type="required" caseSensitive="yes" regex="no">destroySharedCache passed</output>
		<output type="failure" caseSensitive="yes" regex="no">failed</output>
		<output type="failure" caseSensitive="no" regex="no">corrupt</output>
		<output type="failure" caseSensitive="yes" regex="no">Processing dump event</output>
	</test> 

	<test id="Test 87: utilities test: validate that the cache is destroyed" timeout="600" runPath=".">
		<command>$JAVA_EXE$ $UTILITIES_CACHE$,printStats -version</command>
		<output type="success" caseSensitive="yes" regex="no">Cache does not exist</output>
		<output type="failure" caseSensitive="no" regex="no">Current statistics</output>
		<output type="failure" caseSensitive="no" regex="no">Unhandled Exception</output>
		<output type="failure" caseSensitive="yes" regex="no">Exception:</output> 
		<output type="failure" caseSensitive="no" regex="no">corrupt</output>
		<output type="failure" caseSensitive="yes" regex="no">Processing dump event</output>
	</test>	

	<test id="Test 88: utilities test: validate that previous tests did not create a cache" timeout="600" runPath=".">
		<command>$JAVA_EXE$ $currentMode$,printStats -version</command>
		<output type="success" caseSensitive="yes" regex="no">Cache does not exist</output>
		<output type="failure" caseSensitive="no" regex="no">Current statistics</output>
		<output type="failure" caseSensitive="no" regex="no">Unhandled Exception</output>
		<output type="failure" caseSensitive="yes" regex="no">Exception:</output> 
		<output type="failure" caseSensitive="no" regex="no">corrupt</output>
		<output type="failure" caseSensitive="yes" regex="no">Processing dump event</output>
	</test>	

	<test id="Test 89: utilities test: destroy existing cache if any" timeout="600" runPath=".">
		<command>$JAVA_EXE$ $currentMode$,destroy</command>
		<output type="success" caseSensitive="yes" regex="no">Cache does not exist</output>
		<output type="success" caseSensitive="yes" regex="no">has been destroyed</output>
		<output type="success" caseSensitive="yes" regex="no">is destroyed</output>
		<output type="failure" caseSensitive="no" regex="no">Unhandled Exception</output>
		<output type="failure" caseSensitive="yes" regex="no">Exception:</output>
		<output type="failure" caseSensitive="no" regex="no">corrupt</output>
		<output type="failure" caseSensitive="yes" regex="no">Processing dump event</output>
	</test>

	<test id="Test 90: utilities test: create cache to be used below" timeout="600" runPath=".">
		<command>$JAVA_EXE$ $UTILITIES_CACHE$,reset -version</command>
		<output type="success" caseSensitive="yes" regex="yes" javaUtilPattern="yes">(java|openjdk) version</output>
		<output type="failure" caseSensitive="no" regex="no">Unhandled Exception</output>
		<output type="failure" caseSensitive="yes" regex="no">Exception:</output> 
		<output type="failure" caseSensitive="no" regex="no">corrupt</output>
		<output type="failure" caseSensitive="yes" regex="no">Processing dump event</output>
	</test>	
	
	<test id="Test 91: utilities test: iterate and destroy cache with multiple -Xshareclasses option" timeout="600" runPath=".">
		<command>$JAVA_EXE$ $UTILITIES_CP$ $currentMode$ $currentMode$,utilities $UTILITIES_PROGRAM$</command>
		<output type="success" caseSensitive="yes" regex="no">iterateSharedCache passed</output>
		<output type="required" caseSensitive="yes" regex="no">destroySharedCache passed</output>
		<output type="failure" caseSensitive="yes" regex="no">failed</output>
		<output type="failure" caseSensitive="no" regex="no">corrupt</output>
		<output type="failure" caseSensitive="yes" regex="no">Processing dump event</output>
	</test>

	<test id="Test 92: utilities test: validate that cache is destroyed" timeout="600" runPath=".">
		<command>$JAVA_EXE$ $UTILITIES_CACHE$,printStats -version</command>
		<output type="success" caseSensitive="yes" regex="no">Cache does not exist</output>
		<output type="failure" caseSensitive="no" regex="no">Current statistics</output>
		<output type="failure" caseSensitive="no" regex="no">Unhandled Exception</output>
		<output type="failure" caseSensitive="yes" regex="no">Exception:</output> 
		<output type="failure" caseSensitive="no" regex="no">corrupt</output>
		<output type="failure" caseSensitive="yes" regex="no">Processing dump event</output>
	</test>	
	
	<test id="Test 93: utilities test: validate that no new cache" timeout="600" runPath=".">
		<command>$JAVA_EXE$ $currentMode$,printStats -version</command>
		<output type="success" caseSensitive="yes" regex="no">Cache does not exist</output>
		<output type="failure" caseSensitive="no" regex="no">Current statistics</output>
		<output type="failure" caseSensitive="no" regex="no">Unhandled Exception</output>
		<output type="failure" caseSensitive="yes" regex="no">Exception:</output> 
		<output type="failure" caseSensitive="no" regex="no">corrupt</output>
		<output type="failure" caseSensitive="yes" regex="no">Processing dump event</output>
	</test>
	
	<test id="Test 94: JAZZ 39157 -Xshareclasses:verboseJITData testing" timeout="600" runPath=".">
		<command>$JAVA_EXE$ $currentMode$,reset,verboseJITData -version</command>
		<output type="success" caseSensitive="yes" regex="no">[-Xshareclasses JIT data verbose output enabled]</output>
		<output type="failure" caseSensitive="no" regex="no">Unhandled Exception</output>
		<output type="failure" caseSensitive="yes" regex="no">Exception:</output>
		<output type="failure" caseSensitive="no" regex="no">corrupt</output>
		<output type="failure" caseSensitive="yes" regex="no">Processing dump event</output>
	</test>

	<test id="Test 94a: JAZZ 52566 -Xshareclasses:verboseJITData,addtestjithints testing" timeout="600" runPath=".">
		<command>$JAVA_EXE$ $currentMode$,addtestjithints,verboseJITData -version</command>
		<output type="success" caseSensitive="yes" regex="no">[-Xshareclasses JIT data verbose output enabled]</output>
		<output type="required" caseSensitive="yes" regex="yes" javaUtilPattern="yes" showMatch="yes">Stored JITHINT attached data 0xde 0xad 0xbe 0xef for</output>
		<output type="failure" caseSensitive="no" regex="no">Unhandled Exception</output>
		<output type="failure" caseSensitive="yes" regex="no">Exception:</output>
		<output type="failure" caseSensitive="no" regex="no">corrupt</output>
		<output type="failure" caseSensitive="yes" regex="no">Processing dump event</output>
	</test>

	<test id="Test 95a: JAZZ 39157 -Xshareclasses with minjitdata > cache  size" timeout="600" runPath=".">
		<command>$JAVA_EXE$   -Xscminjitdata18m  -Xscmx16m $currentMode$,reset -version</command>
		<output type="success" caseSensitive="yes" regex="no">-Xscminjitdata value is greater than the shared cache size, so it has been set to equal the shared cache size</output>
		<output type="failure" caseSensitive="no" regex="no">Unhandled Exception</output>
		<output type="failure" caseSensitive="yes" regex="no">Exception:</output>
		<output type="failure" caseSensitive="no" regex="no">corrupt</output>
		<output type="failure" caseSensitive="yes" regex="no">Processing dump event</output>
	</test>
	
	<test id="Test 95b: JAZZ 39157 -Xshareclasses with minaot > cache  size" timeout="600" runPath=".">
		<command>$JAVA_EXE$   -Xscminaot18m -Xscmx16m $currentMode$,reset -version</command>
		<output type="success" caseSensitive="yes" regex="no">-Xscminaot value is greater than the shared cache size, so it has been set to equal the shared cache size</output>
		<output type="failure" caseSensitive="no" regex="no">Unhandled Exception</output>
		<output type="failure" caseSensitive="yes" regex="no">Exception:</output>
		<output type="failure" caseSensitive="no" regex="no">corrupt</output>
		<output type="failure" caseSensitive="yes" regex="no">Processing dump event</output>
	</test>

	<test id="Test 96: JAZZ 39157 -Xshareclasses with maxjitdata & maxaot > cache size" timeout="600" runPath=".">
		<command>$JAVA_EXE$   -Xscmaxjitdata17m  -Xscmaxaot17m -Xscmx16m $currentMode$,reset -version</command>
		<output type="success" caseSensitive="yes" regex="no">-Xscmaxaot value is greater than the shared cache size, so it has been set to unlimited</output>
		<output type="required" caseSensitive="yes" regex="no">-Xscmaxjitdata value is greater than the shared cache size, so it has been set to unlimited</output>
		<output type="failure" caseSensitive="no" regex="no">Unhandled Exception</output>
		<output type="failure" caseSensitive="yes" regex="no">Exception:</output>
		<output type="failure" caseSensitive="no" regex="no">corrupt</output>
		<output type="failure" caseSensitive="yes" regex="no">Processing dump event</output>
	</test>
	
	<test id="Test 97: JAZZ 39157 -Xshareclasses with minjitdata > maxjitdata" timeout="600" runPath=".">
		<command>$JAVA_EXE$   -Xscmaxjitdata12m  -Xscminjitdata14m -Xscmx16m $currentMode$,reset -version</command>
		<output type="success" caseSensitive="yes" regex="no">-Xscminjitdata value should not be greater than -Xscmaxjitdata value</output>
		<output type="failure" caseSensitive="no" regex="no">Unhandled Exception</output>
		<output type="failure" caseSensitive="yes" regex="no">Exception:</output>
		<output type="failure" caseSensitive="no" regex="no">corrupt</output>
		<output type="failure" caseSensitive="yes" regex="no">Processing dump event</output>
	</test>

	<test id="Test 98: JAZZ 39157 -Xshareclasses with minaot > maxaot" timeout="600" runPath=".">
		<command>$JAVA_EXE$   -Xscmaxaot12m  -Xscminaot14m -Xscmx16m $currentMode$,reset -version</command>
		<output type="success" caseSensitive="yes" regex="no">-Xscminaot value should not be greater than -Xscmaxaot value</output>
		<output type="failure" caseSensitive="no" regex="no">Unhandled Exception</output>
		<output type="failure" caseSensitive="yes" regex="no">Exception:</output>
		<output type="failure" caseSensitive="no" regex="no">corrupt</output>
		<output type="failure" caseSensitive="yes" regex="no">Processing dump event</output>
	</test>

	<test id="Test 99: JAZZ 39157 -Xshareclasses with minjitdata & maxjitdata < cache size" timeout="600" runPath=".">
		<command>$JAVA_EXE$   -Xscminjitdata12m -Xscmaxjitdata12m -Xscmx16m  $currentMode$,reset -version</command>
		<output type="success" caseSensitive="yes" regex="yes" javaUtilPattern="yes">(java|openjdk) version</output>
		<output type="failure" caseSensitive="no" regex="no">Unhandled Exception</output>
		<output type="failure" caseSensitive="yes" regex="no">Exception:</output>
		<output type="failure" caseSensitive="no" regex="no">corrupt</output>
		<output type="failure" caseSensitive="yes" regex="no">Processing dump event</output>
	</test>

	<test id="Test 100: JAZZ 39157 -Xshareclasses with PrintDetails to check min/max jit size < cache size" timeout="600" runPath=".">
		<command>$JAVA_EXE$   $currentMode$,printDetails -version</command>
		<output type="success" caseSensitive="yes" regex="yes" javaUtilPattern="yes" showMatch="yes">Reserved space for JIT data bytes[\s]*= 12582912</output>
		<output type="required" caseSensitive="yes" regex="yes" javaUtilPattern="yes" showMatch="yes">Maximum space for JIT data bytes[\s]*= 12582912</output>
		<output type="failure" caseSensitive="no" regex="no">Unhandled Exception</output>
		<output type="failure" caseSensitive="yes" regex="no">Exception:</output>
		<output type="failure" caseSensitive="no" regex="no">corrupt</output>
		<output type="failure" caseSensitive="yes" regex="no">Processing dump event</output>
	</test>

	<test id="Test 101: JAZZ 39157 -Xshareclasses with minaot & maxaot < cache size" timeout="600" runPath=".">
		<command>$JAVA_EXE$   -Xscminaot12m -Xscmaxaot12m -Xscmx16m  $currentMode$,reset -version</command>
		<output type="success" caseSensitive="yes" regex="yes" javaUtilPattern="yes">(java|openjdk) version</output>
		<output type="failure" caseSensitive="no" regex="no">Unhandled Exception</output>
		<output type="failure" caseSensitive="yes" regex="no">Exception:</output>
		<output type="failure" caseSensitive="no" regex="no">corrupt</output>
		<output type="failure" caseSensitive="yes" regex="no">Processing dump event</output>
	</test>
	
	<test id="Test 102: JAZZ 39157 -Xshareclasses with PrintDetails to check min/max aot size < cache size" timeout="600" runPath=".">
		<command>$JAVA_EXE$   $currentMode$,printDetails -version</command>
		<output type="success" caseSensitive="yes" regex="yes" javaUtilPattern="yes" showMatch="yes">Reserved space for AOT bytes[\s]*= 12582912</output>
		<output type="required" caseSensitive="yes" regex="yes" javaUtilPattern="yes" showMatch="yes">Maximum space for AOT bytes[\s]*= 12582912</output>
		<output type="failure" caseSensitive="no" regex="no">Unhandled Exception</output>
		<output type="failure" caseSensitive="yes" regex="no">Exception:</output>
		<output type="failure" caseSensitive="no" regex="no">corrupt</output>
		<output type="failure" caseSensitive="yes" regex="no">Processing dump event</output>
	</test>	
	
	<test id="Test 103: JAZZ 39157" timeout="600" runPath=".">
		<command>$JAVA_EXE$ $currentMode$,destroy</command>
		<output type="success" caseSensitive="yes" regex="no">has been destroyed</output>
		<output type="success" caseSensitive="yes" regex="no">is destroyed</output>
		<output type="failure" caseSensitive="no" regex="no">Unhandled Exception</output>
		<output type="failure" caseSensitive="yes" regex="no">Exception:</output>
		<output type="failure" caseSensitive="no" regex="no">corrupt</output>
		<output type="failure" caseSensitive="yes" regex="no">Processing dump event</output>
	</test>	
	
	<test id="Test 104: Design 40220: Create a cache that will be corrupted in the next test." timeout="600" runPath=".">
		<command>$JAVA_EXE$ $currentMode$ -version</command>
		<output type="success" caseSensitive="yes" regex="yes" javaUtilPattern="yes">(java|openjdk) version</output>
		<output type="failure" caseSensitive="no" regex="no">Unhandled Exception</output>
		<output type="failure" caseSensitive="yes" regex="no">Exception:</output> 
		<output type="failure" caseSensitive="yes" regex="no">Processing dump event</output>
	</test>
		
	<!-- Remove stale dumps on z/OS, if any. Test 105 is going to create new dumps. -->
	<exec command="tso delete J9CORE.DMP.*" platforms="zos_390-64.*" />
	<exec command="tso delete J9CORE.DMP" platforms="zos_390-31.*" />
	
	<test id="Test 105: Design 40220: Corrupt the cache." timeout="600" runPath=".">
		<command>$JAVA_EXE$ $SYSDUMP$ $JAVADUMP$ $SNAPDUMP$ $currentMode$,verbose,testFakeCorruption -version</command>
		<output type="success" caseSensitive="no" regex="no" showMatch="yes">Cache CRC is incorrect indicating a corrupt cache</output>
		<output type="required" caseSensitive="yes" regex="no" showMatch="yes">Processing dump event</output>
		<output type="required" caseSensitive="yes" regex="no" showMatch="yes">JVM requested System dump using</output>
		<output type="required" caseSensitive="yes" regex="no" showMatch="yes">System dump written</output>
		<output type="required" caseSensitive="yes" regex="no" showMatch="yes">JVM requested Java dump</output>
		<output type="required" caseSensitive="yes" regex="no" showMatch="yes">Java dump written</output>
		<output type="required" caseSensitive="yes" regex="no" showMatch="yes">JVM requested Snap dump</output>
		<output type="required" caseSensitive="yes" regex="no" showMatch="yes">Snap dump written</output>
		<output type="failure" caseSensitive="yes" regex="no" showMatch="yes">Error in Java dump</output>
		<output type="failure" caseSensitive="no" regex="no" showMatch="yes">Unhandled Exception</output>
		<output type="failure" caseSensitive="yes" regex="no" showMatch="yes">Exception:</output>
		<output type="failure" caseSensitive="yes" regex="no" showMatch="yes">IEATDUMP failed</output>
		<output type="failure" caseSensitive="yes" regex="no" showMatch="yes">Error in System dump</output>
	</test>
	
	<test id="Test 105-a: Make sure dumps due to corrupt cache exist." timeout="600" runPath=".">
		<exec command="sh" capture="LOGNAME" platforms="zos.*" >
			<arg>-c</arg>
			<arg>echo $$LOGNAME</arg>
		</exec>
		<exec command="cp //'$LOGNAME$.J9CORE.DMP.X001' $DUMPFILE$.dmp" platforms="zos_390-64.*" />
		<exec command="cp //'$LOGNAME$.J9CORE.DMP' $DUMPFILE$.dmp" platforms="zos_390-31.*" />
		<exec command="tso delete J9CORE.DMP.*" platforms="zos_390-64.*" />
		<exec command="tso delete J9CORE.DMP" platforms="zos_390-31.*" />
		<command>ls</command>
		<output type="success" caseSensitive="no" regex="no">$DUMPFILE$.dmp</output>
		<output type="required" caseSensitive="no" regex="no">$DUMPFILE$.txt</output>
		<output type="required" caseSensitive="no" regex="no">$DUMPFILE$.trc</output>
	</test>
	
	<exec command="rm -f $DUMPFILE$.dmp" quiet="false" />
	<exec command="rm -f $DUMPFILE$.txt" quiet="false" />
	<exec command="rm -f $DUMPFILE$.trc" quiet="false" />
	
	<test id="Test 106: Design 40220: Make sure printStats does not generate a dump, and writes a message indicating the cache is corrupt." timeout="600" runPath=".">
		<command>$JAVA_EXE$ $currentMode$,printStats</command>
		<output type="success" caseSensitive="no" regex="no">Shared cache "ShareClassesCMLTests" is corrupt</output>
		<output type="failure" caseSensitive="no" regex="no">"ShareClassesCMLTests" has been destroyed</output>
		<output type="failure" caseSensitive="yes" regex="no">Processing dump event</output>
		<output type="failure" caseSensitive="no" regex="no">Unhandled Exception</output>
		<output type="failure" caseSensitive="yes" regex="no">Exception:</output> 
	</test>
		
	<test id="Test 107: Design 40220: Make sure printStats,printDetails does not generate a dump, and writes a message indicating the cache is corrupt." timeout="600" runPath=".">
		<command>$JAVA_EXE$ $currentMode$,printStats,printDetails</command>
		<output type="success" caseSensitive="no" regex="no">Shared cache "ShareClassesCMLTests" is corrupt</output>
		<output type="failure" caseSensitive="no" regex="no">"ShareClassesCMLTests" has been destroyed</output>
		<output type="failure" caseSensitive="yes" regex="no">Processing dump event</output>
		<output type="failure" caseSensitive="no" regex="no">Unhandled Exception</output>
		<output type="failure" caseSensitive="yes" regex="no">Exception:</output> 
	</test>

	<test id="Test 108: Design 40220: Make sure printAllStats does not generate a dump, and writes a message indicating the cache is corrupt." timeout="600" runPath=".">
		<command>$JAVA_EXE$ $currentMode$,printAllStats</command>
		<output type="success" caseSensitive="no" regex="no">Shared cache "ShareClassesCMLTests" is corrupt</output>
		<output type="failure" caseSensitive="no" regex="no">"ShareClassesCMLTests" has been destroyed</output>
		<output type="failure" caseSensitive="yes" regex="no">Processing dump event</output>
		<output type="failure" caseSensitive="no" regex="no">Unhandled Exception</output>
		<output type="failure" caseSensitive="yes" regex="no">Exception:</output> 
	</test>
	
	<test id="Test 109: Design 40220: Make sure printOrphanStats does not generate a dump, and writes a message indicating the cache is corrupt." timeout="600" runPath=".">
		<command>$JAVA_EXE$ $currentMode$,printOrphanStats</command>
		<output type="success" caseSensitive="no" regex="no">Shared cache "ShareClassesCMLTests" is corrupt</output>
		<output type="failure" caseSensitive="no" regex="no">"ShareClassesCMLTests" has been destroyed</output>
		<output type="failure" caseSensitive="yes" regex="no">Processing dump event</output>
		<output type="failure" caseSensitive="no" regex="no">Unhandled Exception</output>
		<output type="failure" caseSensitive="yes" regex="no">Exception:</output> 
	</test>

	<test id="Test 110: Design 40220: Make sure readonly does not generate a dump, and writes a message indicating the cache is corrupt." timeout="600" runPath=".">
		<command>$JAVA_EXE$ $currentMode$,readonly -version</command>
		<output type="success" caseSensitive="no" regex="no">Shared cache "ShareClassesCMLTests" is corrupt</output>
		<output type="failure" caseSensitive="no" regex="no">"ShareClassesCMLTests" has been destroyed</output>
		<output type="failure" caseSensitive="yes" regex="no">Processing dump event</output>
		<output type="failure" caseSensitive="no" regex="no">Unhandled Exception</output>
		<output type="failure" caseSensitive="yes" regex="no">Exception:</output> 
	</test>

	<test id="Test 111: Design 40220: Force a dump on a previously corrupted cache." timeout="600" runPath=".">
		<command>$JAVA_EXE$ $SYSDUMP$ $JAVADUMP$ $SNAPDUMP$ $currentMode$,printStats,forceDumpIfCorrupt</command>
		<output type="success" caseSensitive="no" regex="no">Shared cache "ShareClassesCMLTests" is corrupt</output>
		<output type="required" caseSensitive="yes" regex="no">Processing dump event</output>
		<output type="required" caseSensitive="yes" regex="no" showMatch="yes">Processing dump event</output>
		<output type="required" caseSensitive="yes" regex="no" showMatch="yes">JVM requested System dump using</output>
		<output type="required" caseSensitive="yes" regex="no" showMatch="yes">System dump written</output>
		<output type="required" caseSensitive="yes" regex="no" showMatch="yes">JVM requested Java dump</output>
		<output type="required" caseSensitive="yes" regex="no" showMatch="yes">Java dump written</output>
		<output type="required" caseSensitive="yes" regex="no" showMatch="yes">JVM requested Snap dump</output>
		<output type="required" caseSensitive="yes" regex="no" showMatch="yes">Snap dump written</output>
		<output type="failure" caseSensitive="yes" regex="no" showMatch="yes">Error in Java dump</output>
		<output type="failure" caseSensitive="no" regex="no">Unhandled Exception</output>
		<output type="failure" caseSensitive="yes" regex="no">Exception:</output> 
	</test>
	
	<test id="Test 111-a: Make sure 'forceDumpIfCorrupt' generated dumps for the corrupt cache" timeout="600" runPath=".">
		<exec command="sh" capture="LOGNAME" platforms="zos.*" >
			<arg>-c</arg>
			<arg>echo $$LOGNAME</arg>
		</exec>
		<exec command="cp //'$LOGNAME$.J9CORE.DMP.X001' $DUMPFILE$.dmp" platforms="zos_390-64.*" />
		<exec command="cp //'$LOGNAME$.J9CORE.DMP' $DUMPFILE$.dmp" platforms="zos_390-31.*" />
		<exec command="tso delete J9CORE.DMP.*" platforms="zos_390-64.*" />
		<exec command="tso delete J9CORE.DMP" platforms="zos_390-31.*" />
		<command>ls</command>
		<output type="success" caseSensitive="no" regex="no">$DUMPFILE$.dmp</output>
		<output type="required" caseSensitive="no" regex="no">$DUMPFILE$.txt</output>
		<output type="required" caseSensitive="no" regex="no">$DUMPFILE$.trc</output>
	</test>
	
	<exec command="rm -f $DUMPFILE$.dmp" quiet="false" />
	<exec command="rm -f $DUMPFILE$.txt" quiet="false" />
	<exec command="rm -f $DUMPFILE$.trc" quiet="false" />
	
	<test id="Test 112: Design 40220: Make sure the JVM will delete the corrupted cache, and create a new one." timeout="600" runPath=".">
		<command>$JAVA_EXE$ $currentMode$ -version</command>
		<output type="success" caseSensitive="yes" regex="yes" javaUtilPattern="yes">(java|openjdk) version</output>
		<output type="success" caseSensitive="no" regex="no">Shared cache "ShareClassesCMLTests" is corrupt</output>		
		<output type="required" caseSensitive="yes" regex="yes" javaUtilPattern="yes" showMatch="yes">"ShareClassesCMLTests".*destroyed</output>
		<output type="failure" caseSensitive="yes" regex="no">Processing dump event</output>
		<output type="failure" caseSensitive="no" regex="no">Unhandled Exception</output>
		<output type="failure" caseSensitive="yes" regex="no">Exception:</output> 
	</test>
	
	<test id="Test 113: Design 40220: cleanup" timeout="600" runPath=".">
		<command>$JAVA_EXE$ $currentMode$,destroy</command>
		<output type="success" caseSensitive="yes" regex="no">has been destroyed</output>
		<output type="success" caseSensitive="yes" regex="no">is destroyed</output>
		<output type="failure" caseSensitive="no" regex="no">Unhandled Exception</output>
		<output type="failure" caseSensitive="yes" regex="no">Exception:</output>
		<output type="failure" caseSensitive="no" regex="no">corrupt</output>
		<output type="failure" caseSensitive="yes" regex="no">Processing dump event</output>
	</test>
	
	<test id="Test 114: utilities test: try to use utilities with -Xshareclasses:none option" timeout="600" runPath=".">
		<command>$JAVA_EXE$ $UTILITIES_CP$ $currentMode$ $currentMode$,none $UTILITIES_PROGRAM$</command>
		<output type="success" caseSensitive="yes" regex="no">IllegalStateException by getSharedCacheInfo</output>
		<output type="required" caseSensitive="yes" regex="no">IllegalStateException by destroySharedCache</output>
		
		<output type="failure" caseSensitive="yes" regex="no">passed</output>
		<output type="failure" caseSensitive="no" regex="no">failed</output>
		<output type="failure" caseSensitive="no" regex="no">corrupt</output>
		<output type="failure" caseSensitive="yes" regex="no">Processing dump event</output>
		<output type="failure" caseSensitive="yes" regex="no">JVM requested Java dump</output>
		<output type="failure" caseSensitive="yes" regex="no">JVM requested Snap dump</output>
	</test>

	<test id="Test 115: utilities test: create cache to be used below" timeout="600" runPath=".">
		<command>$JAVA_EXE$ $UTILITIES_CACHE$,reset -version</command>
		<output type="success" caseSensitive="yes" regex="yes" javaUtilPattern="yes">(java|openjdk) version</output>
		<output type="failure" caseSensitive="no" regex="no">Unhandled Exception</output>
		<output type="failure" caseSensitive="yes" regex="no">Exception:</output> 
		<output type="failure" caseSensitive="no" regex="no">corrupt</output>
		<output type="failure" caseSensitive="yes" regex="no">Processing dump event</output>
		<output type="failure" caseSensitive="yes" regex="no">JVM requested Java dump</output>
		<output type="failure" caseSensitive="yes" regex="no">JVM requested Snap dump</output>
	</test>	

	<test id="Test 116: utilities test: iterate and destroy cache when running with different cacheDir option" timeout="600" runPath=".">
		<command>$JAVA_EXE$ $UTILITIES_CP$ $currentMode$,$CACHE_DIR$ $UTILITIES_PROGRAM$</command>
		<output type="success" caseSensitive="yes" regex="no">iterateSharedCache passed</output>
		<output type="required" caseSensitive="yes" regex="no">destroySharedCache passed</output>
		
		<output type="failure" caseSensitive="yes" regex="no">failed</output>
		<output type="failure" caseSensitive="no" regex="no">corrupt</output>
		<output type="failure" caseSensitive="yes" regex="no">Processing dump event</output>
		<output type="failure" caseSensitive="yes" regex="no">JVM requested Java dump</output>
		<output type="failure" caseSensitive="yes" regex="no">JVM requested Snap dump</output>
	</test> 

	<test id="Test 117: utilities test: validate that the cache is destroyed" timeout="600" runPath=".">
		<command>$JAVA_EXE$ $UTILITIES_CACHE$,printStats -version</command>
		<output type="success" caseSensitive="yes" regex="no">Cache does not exist</output>
		
		<output type="failure" caseSensitive="no" regex="no">Current statistics</output>
		<output type="failure" caseSensitive="no" regex="no">Unhandled Exception</output>
		<output type="failure" caseSensitive="yes" regex="no">Exception:</output> 
		<output type="failure" caseSensitive="no" regex="no">corrupt</output>
		<output type="failure" caseSensitive="yes" regex="no">Processing dump event</output>
		<output type="failure" caseSensitive="yes" regex="no">JVM requested Java dump</output>
		<output type="failure" caseSensitive="yes" regex="no">JVM requested Snap dump</output>
	</test>	

	<test id="Test 118: utilities test: validate that previous tests created a cache" timeout="600" runPath=".">
		<command>$JAVA_EXE$ $currentMode$,$CACHE_DIR$,printStats -version</command>
		<output type="success" caseSensitive="no" regex="no">Current statistics</output>
		
		<output type="failure" caseSensitive="yes" regex="no">Cache does not exist</output>
		<output type="failure" caseSensitive="no" regex="no">Unhandled Exception</output>
		<output type="failure" caseSensitive="yes" regex="no">Exception:</output> 
		<output type="failure" caseSensitive="no" regex="no">corrupt</output>
		<output type="failure" caseSensitive="yes" regex="no">Processing dump event</output>
		<output type="failure" caseSensitive="yes" regex="no">JVM requested Java dump</output>
		<output type="failure" caseSensitive="yes" regex="no">JVM requested Snap dump</output>
	</test>
	
	<test id="Test 119: utilities test: delete the cache created in previous test" timeout="600" runPath=".">
		<command>$JAVA_EXE$ $currentMode$,$CACHE_DIR$,destroy</command>
		<output type="success" caseSensitive="yes" regex="no">has been destroyed</output>
		<output type="success" caseSensitive="yes" regex="no">is destroyed</output>
		
		<output type="failure" caseSensitive="no" regex="no">Unhandled Exception</output>
		<output type="failure" caseSensitive="yes" regex="no">Exception:</output>
		<output type="failure" caseSensitive="no" regex="no">corrupt</output>
		<output type="failure" caseSensitive="yes" regex="no">Processing dump event</output>
		<output type="failure" caseSensitive="yes" regex="no">JVM requested Java dump</output>
		<output type="failure" caseSensitive="yes" regex="no">JVM requested Snap dump</output>
	</test>	
	
	<test id="At end destroy cache for cleanup" timeout="600" runPath=".">
		<command>$JAVA_EXE$ $currentMode$,destroy</command>
		<output type="success" caseSensitive="yes" regex="no">Cache does not exist</output>
		<output type="success" caseSensitive="yes" regex="no">has been destroyed</output>
		<output type="success" caseSensitive="yes" regex="no">is destroyed</output>
		
		<output type="failure" caseSensitive="no" regex="no">Unhandled Exception</output>
		<output type="failure" caseSensitive="yes" regex="no">Exception:</output>
		<output type="failure" caseSensitive="no" regex="no">corrupt</output>
		<output type="failure" caseSensitive="yes" regex="no">Processing dump event</output>
		<output type="failure" caseSensitive="yes" regex="no">JVM requested Java dump</output>
		<output type="failure" caseSensitive="yes" regex="no">JVM requested Snap dump</output>
	</test>
		
	<!--
	***** IMPORTANT NOTE *****
	The last test in this file is normally a call to -Xshareclasses:destroy. When the test passes no files should ever be left behind. 
	-->
</suite>
	
